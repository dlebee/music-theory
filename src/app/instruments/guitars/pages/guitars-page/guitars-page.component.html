<h1>Guitar Instruments</h1>

<p>
    Choose a guitar:
    <ng-container *ngIf="options$ | async as options">
        <select [(ngModel)]="currentType" class="form-control">
            <optgroup [attr.label]="c.category" *ngFor="let c of options">
                <option [value]="t" *ngFor="let t of c.types">{{t}}</option>
            </optgroup>
        </select>
    </ng-container>
</p>
<p>
    Reversed: <input type="checkbox" [(ngModel)]="reversed" />
</p>
<p>
    Show Clocks: <input type="checkbox" [(ngModel)]="showClocks" />
</p>


<div class="row">
    <div class="col">
        <ng-container *ngIf="notes$ | async as notes">
            <select class="form-control" [(ngModel)]="selectedNote" (change)="refreshDegrees()">
                <option [ngValue]="null">Select a note</option>
                <option [ngValue]="note" *ngFor="let note of notes">
                    <app-inline-note [note]="note"></app-inline-note>
                </option>
            </select>
        </ng-container>
    </div>
    <div class="col">
        <select class="form-control" [(ngModel)]="selectedScale" (change)="refreshDegrees()">
            <option [ngValue]="null">Select a scale</option>
            <option [ngValue]="scaleType" *ngFor="let scaleType of scaleTypes">
                {{ scaleType }}
            </option>
        </select>
    </div>
</div>

<ng-container *ngIf="guitar$ | async as guitar;">
    <div class="mt-3">
        <app-guitar [guitar]="guitar" 
                    [reversed]="reversed" 
                    [showNotes]="(degrees$ | async) == null"
                    [notes]="scaleNotes">
        </app-guitar>
    </div>
</ng-container>

<ng-container *ngIf="degrees$ | async as degrees">
    <div class="mt-2">
        <app-scale [showClock]="showClocks" [scale]="degrees.scale"></app-scale>
    </div>

    <div class="row mt-4">
        <div class="col-12">
            <h4>Chords</h4>
        </div>
        <div class="col-12 col-md-6 col-lg-4 p-2" *ngFor="let c of degrees.chords; let i = index">
            <app-chord [showClock]="showClocks" [chord]="c"></app-chord>
        </div>
    </div>
</ng-container>